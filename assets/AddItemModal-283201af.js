import{c as b,r as m,j as e,M as w,B as F,S as J,f as K,a as Q,b as Y}from"./index-ba409f95.js";import{X as ee,C as E,D as se,S as ae}from"./x-689ba882.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=b("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=b("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=b("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=b("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ie=["Theme Parks","Restaurants","Shopping","Entertainment","Outdoor Activities","Museums","Sports","Nightlife","Other"],le=["low","medium","high"];function ne({onClose:z,onAdd:H,userLocation:g}){const[t,u]=m.useState({title:"",description:"",address:"",category:"Other",priority:"medium",estimatedDuration:60,cost:0,notes:"",isOpen:!0}),[f,S]=m.useState(null);m.useState(!1);const[r,A]=m.useState({}),[C,j]=m.useState({});m.useState(!1),m.useState(null);const[P,O]=m.useState(!1),[T,D]=m.useState(null),[_,v]=m.useState([]),[R,N]=m.useState(!1),[$,q]=m.useState(null),[B,k]=m.useState(!1);m.useEffect(()=>{g&&S({lat:g.lat,lng:g.lng})},[g]);const h=s=>{const{name:i,value:n}=s.target;u(d=>({...d,[i]:i==="estimatedDuration"||i==="cost"?Number(n):n})),r[i]&&A(d=>({...d,[i]:""}))},G=s=>{h(s);const i=s.target.value;if(k(!0),$&&clearTimeout($),!i.trim()){v([]),k(!1);return}const n=setTimeout(async()=>{try{N(!0);const d=await K(i);v(d)}catch{v([])}finally{N(!1)}},300);q(n)},U=async s=>{var i,n,d,l;try{N(!0),k(!1),u(c=>({...c,address:s.description}));const a=await Q(s.place_id);a.name&&u(c=>({...c,title:a.name})),a.formatted_address&&u(c=>({...c,address:a.formatted_address})),(i=a.geometry)!=null&&i.location&&S({lat:a.geometry.location.lat,lng:a.geometry.location.lng});let o="";if((n=a.editorial_summary)!=null&&n.overview?o=a.editorial_summary.overview:a.types&&a.types.length&&(o=a.types.map(c=>c.replace(/_/g," ")).join(", ")),o&&u(c=>({...c,description:o})),(d=a.opening_hours)!=null&&d.periods){const c={},x=a.opening_hours.periods;for(let p=0;p<7;p++){const y=x.find(Z=>Z.open.day===p);y?c[p]={open:y.open.time.replace(/(\d{2})(\d{2})/,"$1:$2"),close:(l=y.close)!=null&&l.time?y.close.time.replace(/(\d{2})(\d{2})/,"$1:$2"):""}:c[p]=null}j(c)}v([])}catch(a){console.error("Error fetching place details:",a)}finally{N(!1)}},V=()=>{const s={};return t.title.trim()||(s.title="Title is required"),t.description.trim()||(s.description="Description is required"),f||(s.address="Please select a valid location"),t.estimatedDuration<=0&&(s.estimatedDuration="Duration must be greater than 0"),t.cost<0&&(s.cost="Cost cannot be negative"),A(s),Object.keys(s).length===0},W=s=>{if(s.preventDefault(),!V())return;if(!f){A(n=>({...n,address:"Please select a valid location"}));return}const i={title:t.title.trim(),description:t.description.trim(),location:f,address:t.address.trim(),category:t.category,priority:t.priority,estimatedDuration:t.estimatedDuration,cost:t.cost,notes:t.notes.trim(),isOpen:t.isOpen,openingHours:C};H(i)},X=async()=>{var s,i,n,d;if(!t.title.trim()&&!t.address.trim()){D("Please enter at least a title or address first.");return}O(!0),D(null);try{const l=await Y(t.title,t.address);l.name&&u(o=>({...o,title:l.name})),l.formatted_address&&u(o=>({...o,address:l.formatted_address})),(s=l.geometry)!=null&&s.location&&S({lat:l.geometry.location.lat,lng:l.geometry.location.lng});let a="";if((i=l.editorial_summary)!=null&&i.overview?a=l.editorial_summary.overview:l.types&&l.types.length&&(a=l.types.map(o=>o.replace(/_/g," ")).join(", ")),a&&u(o=>({...o,description:a})),(n=l.opening_hours)!=null&&n.periods){const o={},c=l.opening_hours.periods;for(let x=0;x<7;x++){const p=c.find(y=>y.open.day===x);p?o[x]={open:p.open.time.replace(/(\d{2})(\d{2})/,"$1:$2"),close:(d=p.close)!=null&&d.time?p.close.time.replace(/(\d{2})(\d{2})/,"$1:$2"):""}:o[x]=null}j(o)}}catch{D("Failed to auto-populate. Please check your internet connection and try again.")}finally{O(!1)}};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content modern-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"🗺️ Add New Activity"}),e.jsx("button",{onClick:z,className:"close-button","aria-label":"Close modal",children:e.jsx(ee,{size:24})})]}),e.jsxs("form",{onSubmit:W,className:"modern-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:[e.jsx(L,{size:16,className:"label-icon"}),"Activity Title *"]}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:h,className:`form-input ${r.title?"error":""}`,placeholder:"Enter activity name...","aria-label":"Activity title"}),r.title&&e.jsx("span",{className:"error-text",children:r.title})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"address",className:"form-label",children:[e.jsx(w,{size:16,className:"label-icon"}),"Location Address *"]}),e.jsxs("div",{className:"address-input-container",children:[e.jsx("input",{type:"text",id:"address",name:"address",value:t.address,onChange:G,className:`form-input ${r.address?"error":""}`,placeholder:"Start typing to search locations...","aria-label":"Location address",autoComplete:"off"}),R&&e.jsx("div",{className:"address-loading",children:e.jsx(M,{size:16,className:"animate-spin"})})]}),B&&_.length>0&&e.jsx("div",{className:"address-suggestions",children:_.map(s=>e.jsxs("button",{type:"button",className:"suggestion-item",onClick:()=>U(s),children:[e.jsx(w,{size:14}),e.jsx("span",{children:s.description})]},s.place_id))}),r.address&&e.jsx("span",{className:"error-text",children:r.address}),f&&e.jsxs("div",{className:"location-confirmation",children:[e.jsx(w,{size:14}),e.jsxs("span",{children:["📍 Location confirmed: ",f.lat.toFixed(4),", ",f.lng.toFixed(4)]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"description",className:"form-label",children:[e.jsx(I,{size:16,className:"label-icon"}),"Description *"]}),e.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:h,className:`form-input ${r.description?"error":""}`,placeholder:"Describe the activity...",rows:3,"aria-label":"Activity description"}),r.description&&e.jsx("span",{className:"error-text",children:r.description})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"category",className:"form-label",children:[e.jsx(te,{size:16,className:"label-icon"}),"Category"]}),e.jsx("select",{id:"category",name:"category",value:t.category,onChange:h,className:"form-select","aria-label":"Activity category",children:ie.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"priority",className:"form-label",children:[e.jsx(L,{size:16,className:"label-icon"}),"Priority"]}),e.jsx("select",{id:"priority",name:"priority",value:t.priority,onChange:h,className:"form-select","aria-label":"Activity priority",children:le.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"estimatedDuration",className:"form-label",children:[e.jsx(E,{size:16,className:"label-icon"}),"Duration (minutes) *"]}),e.jsx("input",{type:"number",id:"estimatedDuration",name:"estimatedDuration",value:t.estimatedDuration,onChange:h,className:`form-input ${r.estimatedDuration?"error":""}`,min:"1",placeholder:"60","aria-label":"Activity estimated duration"}),r.estimatedDuration&&e.jsx("span",{className:"error-text",children:r.estimatedDuration})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"cost",className:"form-label",children:[e.jsx(se,{size:16,className:"label-icon"}),"Estimated Cost ($)"]}),e.jsx("input",{type:"number",id:"cost",name:"cost",value:t.cost,onChange:h,className:`form-input ${r.cost?"error":""}`,min:"0",step:"0.01",placeholder:"0.00","aria-label":"Activity estimated cost"}),r.cost&&e.jsx("span",{className:"error-text",children:r.cost})]})]}),e.jsxs("div",{className:"auto-populate-section",children:[e.jsx(F,{type:"button",onClick:X,disabled:P,variant:"neutral",size:"sm",className:"auto-populate-btn",children:P?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:16,className:"animate-spin"}),"Auto-populating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:16}),"Auto-populate from Google"]})}),T&&e.jsx("span",{className:"error-text",children:T})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx(E,{size:16,className:"label-icon"}),"Opening Hours"]}),e.jsx("div",{className:"opening-hours-grid",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((s,i)=>{var n,d;return e.jsxs("div",{className:"day-row",children:[e.jsx("span",{className:"day-label",children:s.slice(0,3)}),e.jsxs("div",{className:"time-inputs",children:[e.jsx("input",{type:"time",value:((n=C[i])==null?void 0:n.open)||"",onChange:l=>j(a=>({...a,[i]:{...a[i]||{},open:l.target.value}})),className:"time-input","aria-label":`Open time for ${s}`}),e.jsx("span",{className:"time-separator",children:"-"}),e.jsx("input",{type:"time",value:((d=C[i])==null?void 0:d.close)||"",onChange:l=>j(a=>({...a,[i]:{...a[i]||{},close:l.target.value}})),className:"time-input","aria-label":`Close time for ${s}`})]})]},s)})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label checkbox-label",children:[e.jsx("input",{type:"checkbox",id:"isOpen",name:"isOpen",checked:t.isOpen,onChange:s=>u(i=>({...i,isOpen:s.target.checked})),className:"form-checkbox","aria-label":"Is activity currently open"}),e.jsx("span",{className:"checkbox-text",children:"🟢 This place is currently open"})]}),e.jsx("p",{className:"help-text",children:"Uncheck if the place is closed or you want to mark it as unavailable"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"notes",className:"form-label",children:[e.jsx(I,{size:16,className:"label-icon"}),"Additional Notes"]}),e.jsx("textarea",{id:"notes",name:"notes",value:t.notes,onChange:h,className:"form-input",placeholder:"Any additional details, tips, or special requirements...",rows:2,"aria-label":"Additional notes"})]}),e.jsxs(J,{children:[e.jsx(F,{type:"button",variant:"neutral",onClick:z,className:"cancel-btn",children:"Cancel"}),e.jsx(F,{type:"submit",variant:"primary",className:"submit-btn",children:"Add Activity"})]})]})]})})}export{ne as default};
